# Digital 3D Model of New York City
## General Information
In this student project a semantic 3D city model of New York City (NYC) has been created based on datasets provided in the [NYC Open Data Portal](https://opendata.cityofnewyork.us/). Different 3D feature types were derived from existing public 2D and 2.5D datasets using spatial and semantic transformations together with (some) photogrammetric analyses. The resulting 3D city model is represented in a homogenized and integrated way using the international standard [CityGML](https://www.citygml.org/) of the [Open Geospatial Consortium (OGC)](http://www.opengeospatial.org/). It comprises all NYC buildings, land parcels, roads, parks, the digital terrain model, and water bodies – all with 3D geometries. To the best of our knowledge it is the first publicly available big 3D city model of a large city in the USA which is based on official governmental data.

All data transformations and manipulations were performed using the ‘[Feature Manipulation Engine’ (FME 2016.1) by Safe Software](https://www.safe.com/). The FME Workbenches created in order to generate this semantic 3D city model are made available in this repository.

More detailed information can be found on [the project's website](https://www.gis.bgu.tum.de/en/projects/new-york-city-3d/). 

## Attention 
The Workspaces were generated using FME 2016.1. Opening the Workspaces in different Versions of FME might lead to errors. 

## Content
* **FME Workspaces**
  
  This folder contains all FME Workspaces created in the process of generating the semantic 3D city model of New York City. 

* **Tutorial: Shapefile to CityGML**

  This file contains an easy to follow tourguide showing how to create CityGML compliant data from Open Data Shapefiles provided by the New York City Open Data Portal using the Software FME. The data used in this tutorial is also made available with this download.
  
## Documentation
A detailed documentation on how these Workspaces were used in the course of generating this city model is provided on the project's [TUM-Wiki](https://wiki.tum.de/display/gisproject/Implementation) section 'Implementation'.
 
| FME Workspace Nr.   |Short description|
| :-----------: | :----------------------------------|
| 1 |Add additional attributes to the street centerline data generated in project phase 1. Information from different datasets is merged using corresponding attributes such as 'segmentID' or 'gml_name'.|
| 2 |Centerlines representing complex interchanges of motorway junctions are filtered out.|
| 3 |A lod0Network is created using the centerlines generated in (1) and adding sidewalk centerlines as 'Track' features.|
| 4 |Data from the Planimetric Database is manipulated semantically and geometrically. Relevant information contained within the centerline data (generated in 1) is tranferred using a spatial correlation method.|
| 5 |Suitable textures are added to each object generated in (4).|
| 6 |An advanced data structure is implemented by creating 'TrafficAreas' as well as 'AuxiliaryTrafficAreas' and assigning these objects to corresponding 'Road', 'Track' and 'Square' features.| 
| 7 |The output from (6) is textured and extruded to 3D objects.| 
 
## Software
**Feature Manipulation Engine (FME)**

The Software ‘Feature Manipulation Engine’ (FME) was developed by the canadian company Safe Software. Data from different sources and in different formats can be imported into FME using so called ‘Readers’. This data then can be manipulated using ‘Transformers’. After the manipulation is complete, the newly generated data can be exported into the desired output format using so called ‘Writers’.

## Results
A video demo on the resulting city model created using the presented FME Workspaces can be watched [here](https://www.youtube.com/watch?v=CqZ_jXSk8L8).

The 3D Web Map Client project using the resulting datasets generated with these FME Workspaces can be explored [here](http://www.3dcitydb.net/3dcitydb-web-map/1.2/3dwebclient/index.html?title=NYC-Detailed-Road-Model&shadows=false&terrainShadows=0&latitude=40.74249720234783&longitude=-73.98848314389652&height=346.809371251304&heading=211.86362629888058&pitch=-64.75546066800415&roll=359.7659613167888&layer_0=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FBuilding_gltf%252FBuilding_gltf_collada_MasterJSON.json%26name%3DBuildings%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1iG6_vYe7JGTNAUwFw7TpD8EMO-iQe6gSpa6MJlCF%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_1=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FPlaza%252FPlaza_collada_MasterJSON.json%26name%3DPlaza%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1tWJ3e8ST0adXtQeFt0wvk-3PbJqyHM285apy5yNI%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_2=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FMedian_Grass%252FMedian_Grass_collada_MasterJSON.json%26name%3DGrass%2520Areas%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1nNOHzCl32eueQ_Bf0rN0F1iP_cnajwb34AX11ZcJ%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_3=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FParking_Lot%252FParking_Lot_collada_MasterJSON.json%26name%3DParking%2520Lot%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1CzCx9CqrXeSLu5l0-ap-U0pwepelg8fi5Tb2TTgz%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_4=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FMedian_Painted%252FMedian_Painted_collada_MasterJSON.json%26name%3DRoad%2520Marking%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1_gpcb_xx3JmsWt9Wthi7z9q0iE-72z5KR7BxjXBp%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_5=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FTraffic_Islands%252FTraffic_Islands_collada_MasterJSON.json%26name%3DDividing%2520Strips%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1xV2vNx7GfT0xjOEAVRdgPts-RXk2bOy8zXfJjTAY%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_6=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FEntrance%252FEntrance_collada_MasterJSON.json%26name%3DParking%2520Lot%2520Entrance%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D17DoKrHHGg9D83If9lKRxVrXUf3nRsL_-MMV1nTJu%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_7=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FIntersection%252FIntersection_collada_MasterJSON.json%26name%3DIntersections%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1Vq56AxxyLjLxYFDMOPoc0mILaGcX_FoETHcA3bRL%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_8=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FTrack%252FTrack_collada_MasterJSON.json%26name%3DTracks%26active%3Dfalse%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D17bFXQuF_gLacxVXPWJjJk70V5yQ2SLfGbvLOohG-%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_9=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FRoadbed%252FRoadbed_collada_MasterJSON.json%26name%3DRoadbed%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D181y6YmQjppA9XoGSNgnaxKRO9OiorakeAqMsg-5N%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_10=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FSidewalkTex%252FSidewalkTex_collada_MasterJSON.json%26name%3DSidewalk%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D1dtNjir9-TrULfz4okHT9Qr29bjSvWsjPnOB_gVs7%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30&layer_11=url%3Dhttp%253A%252F%252Fwww.3dcitydb.net%252F3dcitydb%252Ffileadmin%252Fpublic%252F3dwebclientprojects%252FNYC-Model-20170501%252FCurb%252FCurb_collada_MasterJSON.json%26name%3DCurb%26active%3Dtrue%26spreadsheetUrl%3Dhttps%253A%252F%252Fwww.google.com%252Ffusiontables%252FDataSource%253Fdocid%253D16zkBaiTURomjT1ihEIJf4Czu1L2NcOWHQBOG3oRO%26cityobjectsJsonUrl%3D%26minLodPixels%3D300%26maxLodPixels%3D1.7976931348623157e%252B308%26maxSizeOfCachedTiles%3D50%26maxCountOfVisibleTiles%3D30).

## Disclaimer

The Chair of Geoinformatics at the Technical University of Munich provides these FME Workspaces for free usage. No warranties or guarantee on the correctness, completeness, or appropriateness for any specific use is given. In no case TUM / Chair of Geoinformatics can be held liable for damages, caused directly or indirectly, by using or working with these Workspaces or software tools.
